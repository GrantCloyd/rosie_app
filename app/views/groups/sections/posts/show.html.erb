<%= turbo_frame_tag "main_view" do  %>
  <div class="container-md">
    <h1 class='<%="#{primary_header}"%>'> <%= @post.title %> </h1>

    <% if @post.user == current_user || @user_group_section.moderator_or_creator? %>
      <div class="border-4 border-slate-400 bg-slate-200 w-42 px-2 pb-2 absolute left-4 mt-16">
        <p class="text-slate-600 flex justify-center font-medium mt-3"> * Status *  </p> 
        <p class="flex justify-center mt-1"> <%= @post.status.titleize %> </p>
        <hr class="border-1 border-slate-600 mt-1" >
        <div class="mx-auto flex justify-items flex-col">
          <button class='<%="#{primary_button}"%>'>
            <%= link_to "Edit Post", edit_group_section_post_path(@group, @section, @post), data: {turbo_action: :advance} %>
          </button>
        </div>
      </div>
    <% end %>

    <%= navigation_breadcrumbs(@group, @section, @post) %>


    <div class='<%="#{primary_form}"%>'> 
      <p class="mt-5 pt-2 flex justify-center"> <span class="font-medium text-2xl"> <%= @post.title %> </span>       </p> 

      <p class="my-1 flex justify-center"> <span class="ml-1 mr-1"> by <%= @post.user.full_name %>  </span> 
        <% if @post.published? %>
          <span >
          | Published on <%= @post.published_on.strftime("%D") %>
        <% end %>
        </span>
      </p>

      <hr class="border-1 border-slate-600 mt-1">
      <div class="flex justify-center mt-4 ml-2 pb-8 mb-2">
        <%= @post.content %>
      </div>
      <hr class="border-1 border-slate-600 mt-1 mb-4">
    </div>
  </div>

  <div class='<%="#{primary_form}"%> my-10 flex justify-center p-4'> 
    <h3> Images: </h3>
   </div>
    
   <div class='<%="#{primary_form}"%> my-10 p-4'> 
    <h3 class="flex justify-center"> Comments: </h3>
    <div id="comments-container">
      <% if @comments.empty? %>
        <div id="empty-comments">
          <hr class="border-1 border-slate-600 mt-1 mb-4">
          <p  class=" mt-2 flex justify-center"> No comments yet. Be the first! </p>
        </div>
      <% else %>
        <% @comments.each do |comment| %>
          <%= render 'groups/sections/posts/comments/comment', comment: comment, post: @post, user_group_section: @user_group_section%>
        <% end %>
      <% end %>
    </div>
   </div>

    <% if @user_group_section.can_comment? %>
      <%= render 'groups/sections/posts/comments/form', post: @post %>
    <% end %>
<% end %>